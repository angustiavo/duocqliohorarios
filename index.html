<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Planificador de Horario</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 10px; background-color: #f0f2f5; font-size: 14px; color: #333; }
    h2 { color: #1a3a5a; border-bottom: 2px solid #1a3a5a; padding-bottom: 10px; margin-top: 5px; }
    .controles { display: grid; grid-template-columns: 1fr; gap: 15px; background: #fff; padding: 15px; border-radius: 8px; margin-bottom: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .ramo-grupo { background: #f8f9fa; padding: 10px; border-radius: 8px; border: 1px solid #ddd; }
    .ramo-titulo { font-weight: bold; font-size: 13px; color: #1a3a5a; margin-bottom: 8px; display: block; border-bottom: 1px solid #eee; padding-bottom: 5px; }
    
    .opt-item { display: flex; align-items: center; padding: 6px 0; border-bottom: 1px solid #f0f0f0; }
    .opt-item:last-child { border-bottom: none; }
    .opt-item input { margin-right: 10px; width: 18px; height: 18px; cursor: pointer; }
    .opt-text { font-size: 12px; cursor: pointer; flex: 1; line-height: 1.2; }

    .btn-limpiar { background-color: #dc3545; color: white; border: none; padding: 12px; border-radius: 5px; width: 100%; font-weight: bold; margin-bottom: 15px; cursor: pointer; }
    .table-wrapper { overflow-x: auto; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    table { border-collapse: collapse; width: 100%; background: white; min-width: 750px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; font-size: 11px; height: 42px; }
    th { background-color: #1a3a5a; color: white; text-transform: uppercase; }
    td:first-child { font-weight: bold; background-color: #f8f9fa; width: 110px; color: #555; }
    .bloque { background-color: #e3f2fd; font-weight: bold; color: #0d47a1; border: 1px solid #90caf9; }
    .conflicto { background-color: #ffcdd2; color: #b71c1c; border: 2px solid #ef5350; font-weight: bold; }
    #alerta { color: #b71c1c; background: #ffcdd2; padding: 12px; border-radius: 5px; margin-bottom: 15px; display: none; font-size: 13px; font-weight: bold; border-left: 5px solid #b71c1c; }
  </style>
</head>
<body>

<h2>üìÖ Mi Planificador de Horario</h2>
<button class="btn-limpiar" onclick="limpiarTodo()">üßπ Limpiar Todo</button>
<div id="alerta"></div>

<div class="controles" id="panel-controles">
  
  <div class="ramo-grupo">
    <span class="ramo-titulo">üçΩÔ∏è Cocina Criolla Chilena</span>
    <div class="opt-item"><input type="checkbox" value="Lu-1-6:COCINA" onchange="actualizar()"><span class="opt-text">001D - Santamar√≠a (Lu 08:31-12:50)</span></div>
    <div class="opt-item"><input type="checkbox" value="Lu-8-13:COCINA" onchange="actualizar()"><span class="opt-text">002D - Tapia (Lu 13:41-18:10)</span></div>
  </div>

  <div class="ramo-grupo">
    <span class="ramo-titulo">üç∞ Pasteler√≠a Criolla</span>
    <div class="opt-item"><input type="checkbox" value="Ma-1-6:PASTELER√çA" onchange="actualizar()"><span class="opt-text">001D - Barrera (Ma 08:31-12:50)</span></div>
    <div class="opt-item"><input type="checkbox" value="Ma-8-13:PASTELER√çA" onchange="actualizar()"><span class="opt-text">002D - Mu√±oz (Ma 13:41-18:10)</span></div>
  </div>

  <div class="ramo-grupo">
    <span class="ramo-titulo">üç∑ Vinos y Mixolog√≠a</span>
    <div class="opt-item"><input type="checkbox" value="Mi-1-5:VINOS" onchange="actualizar()"><span class="opt-text">001D - Michaud (Mi 08:31-12:10)</span></div>
    <div class="opt-item"><input type="checkbox" value="Mi-8-12:VINOS" onchange="actualizar()"><span class="opt-text">002D - Tiska (Mi 13:41-17:20)</span></div>
  </div>

  <div class="ramo-grupo">
    <span class="ramo-titulo">üó£Ô∏è Ingl√©s Elemental I</span>
    <div class="opt-item"><input type="checkbox" value="Mi-7-8:INGL√âS (ON)|Vi-8-9:INGL√âS (ON)" onchange="actualizar()"><span class="opt-text">001D - Cornejo [ONLINE]</span></div>
    <div class="opt-item"><input type="checkbox" value="Ma-13-14:INGL√âS (ON)|Ju-13-14:INGL√âS (ON)" onchange="actualizar()"><span class="opt-text">002D - Bravo [ONLINE]</span></div>
    <div class="opt-item"><input type="checkbox" value="Ma-5-6:INGL√âS|Mi-6-7:INGL√âS" onchange="actualizar()"><span class="opt-text">003D - Fierro (Presencial)</span></div>
  </div>

  <div class="ramo-grupo">
    <span class="ramo-titulo">üè´ Optativos</span>
    <div class="opt-item"><input type="checkbox" value="Ju-1-4:MARCA" onchange="actualizar()"><span class="opt-text">Marca Personal (Ju 08:31-11:20)</span></div>
    <div class="opt-item"><input type="checkbox" value="Vi-1-5:CULTURA" onchange="actualizar()"><span class="opt-text">Cultura y Gastronom√≠a (Vi 08:31-12:10)</span></div>
  </div>

</div>

<div class="table-wrapper">
  <table>
    <thead>
      <tr><th>Horario</th><th>Lunes</th><th>Martes</th><th>Mi√©rcoles</th><th>Jueves</th><th>Viernes</th></tr>
    </thead>
    <tbody id="tabla"></tbody>
  </table>
</div>

<script>
const rangos = [
  "08:31‚Äì09:10", "09:11‚Äì09:50", "10:01‚Äì10:40", "10:41‚Äì11:20",
  "11:31‚Äì12:10", "12:11‚Äì12:50", "13:01‚Äì13:40", "13:41‚Äì14:20",
  "14:31‚Äì15:10", "15:11‚Äì15:50", "16:01‚Äì16:40", "16:41‚Äì17:20",
  "17:31‚Äì18:10", "18:11‚Äì18:50"
];
const dias = ["Lu","Ma","Mi","Ju","Vi"];
const tabla = document.getElementById("tabla");
const alerta = document.getElementById("alerta");
let ocupado = {};

rangos.forEach((hora, i) => {
  const fila = document.createElement("tr");
  fila.innerHTML = `<td>${hora}</td>` + dias.map(d => `<td data-dia="${d}" data-modulo="${i+1}"></td>`).join("");
  tabla.appendChild(fila);
});

function pintar(valor) {
  if (!valor) return;
  valor.split("|").forEach(v => {
    const [bloque, nombre] = v.split(":");
    const [dia, desde, hasta] = bloque.split("-");
    for (let i = parseInt(desde); i <= parseInt(hasta); i++) {
      const clave = dia + "-" + i;
      const celda = document.querySelector(`td[data-dia="${dia}"][data-modulo="${i}"]`);
      if (celda) {
        if (ocupado[clave]) {
          celda.classList.add("conflicto");
          alerta.style.display = "block";
          alerta.innerHTML += `‚ö†Ô∏è Tope: ${nombre} choca con ${ocupado[clave]} (${dia} ${rangos[i-1]})<br>`;
        } else {
          celda.classList.add("bloque");
          celda.textContent = nombre;
          ocupado[clave] = nombre;
        }
      }
    }
  });
}

function actualizar() {
  document.querySelectorAll("td[data-dia]").forEach(c => { c.textContent = ""; c.className = ""; });
  ocupado = {}; alerta.innerHTML = ""; alerta.style.display = "none";
  
  // Buscar todos los checkboxes marcados en toda la p√°gina
  document.querySelectorAll('input[type="checkbox"]:checked').forEach(cb => {
    pintar(cb.value);
  });
}

function limpiarTodo() {
  document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
  actualizar();
}
</script>
</body>
</html>

